---
TOCTitle: 脱机发布
Title: 脱机发布
ms:assetid: 'f6384ed2-f917-442e-aa63-c1394a1c4d06'
ms:contentKeyID: 18112789
ms:mtpsurl: 'https://technet.microsoft.com/zh-cn/library/Cc747741(v=WS.10)'
---

脱机发布
========

脱机发布不同于联机发布，原因在于在这两种发布中支持 RMS 的应用程序获取发布许可证的方式不同。

作者在脱机状态下发布内容前，必须在其能够通过网络访问根认证服务器的时候获取客户端许可方证书。

脱机发布过程包括以下步骤：

1.  作者使用支持 RMS 的应用程序创建文档，并为该内容指定权限和条件。
2.  当作者保存该文件时，客户端许可方证书允许本地计算机或设备为该文件颁发和签署一个发布许可证。
    该发布许可证包含内容密钥的两个副本：一个副本是使用客户端许可方证书的公钥进行加密的，而另一个副本则是使用颁发客户端许可方证书的那台服务器的公钥进行加密的。发布许可证还包含该服务器的 URL。这两个公钥和 URL 是由客户端许可方证书提供的。
3.  计算机使用客户端许可方证书创建所有者许可证。所有者许可证是一种特殊的用户许可证，它可以授予作者在脱机状态下使用受 RMS 保护的内容的权限。客户端许可方证书使用自己的私钥来对发布许可证中的对称内容密钥进行加密，然后将其重新加密到所有者许可证中。
4.  该应用程序使用内容密钥加密文件，并将发布许可证绑定到该文件。只有颁发发布许可证的 RMS 服务器或属于可信发布域的服务器才能颁发许可证，以便对该文件进行解密。
